@page "/vendor-registration/new"
@using MudBlazor
@using System.ComponentModel.DataAnnotations
@using OceanVMSClient.Extensions

<MudBreadcrumbs Items="_items" Separator="/" Class="mb-0" />
<PageHeader Title="New Vendor Registration" Class="mb-0" />

<MudCard Class="pa-1" Elevation="1">
    <MudCardContent>
        <!-- EditForm: perform validation manually in the handler so we can show dialog-only -->
        <EditForm EditContext="_editContext" OnSubmit="HandleSubmit">
            @* Do not include DataAnnotationsValidator or ValidationSummary here;
               validation will be run manually and displayed in a dialog. *@

            <!-- sequential stepper: bind ActiveIndex two-way to `ActiveStep` property -->
            <MudStepper NonLinear="true" @bind-ActiveIndex="ActiveStep" ShowResetButton="true" ShowButtons="true">
                <MudStep Title="Organization Info" Label="Step 1" Icon="@Icons.Material.Filled.Filter1" 
                         @bind-Completed="_completed">
                    <!-- Make items equal height -->
                    <MudGrid GutterSize="1" AlignItems="center" Spacing="0">

                        <MudItem md="4" Class="h-150">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudGrid Spacing="0" GutterSize="1" AlignItems="center">
                                    <MudText Typo="Typo.h6" Color="Color.Info">Organization Information</MudText>
                                    <MudDivider Class="mx-2" />
                                    <MudItem xs="12">
                                        <MudTextField Label="Organization Name"
                                                      Placeholder="Oganization Name"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.OrganizationName"
                                                      HelperTextOnFocus="true"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.OrganizationName)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        @if (_companyOwnerships?.Any() == true)
                                        {
                                            <MudSelect T="string"
                                                       Placeholder="Company Ownership"
                                                       Typo="Typo.subtitle2"
                                                       Label="Company Ownership"
                                                       Variant="Variant.Text"
                                                       FullWidth="true"
                                                       Margin="Margin.Dense"
                                                       Disabled="@_isReadOnly"
                                                       ValueChanged="OnCompanyOwnershipChanged">
                                                @foreach (var ownership in _companyOwnerships)
                                                {
                                                    <MudSelectItem Value="@(ownership.CompanyOwnershipType)">
                                                        @ownership.CompanyOwnershipType
                                                    </MudSelectItem>
                                                }
                                            </MudSelect>
                                        }
                                        else
                                        {
                                            <MudText Typo="Typo.caption">Loading ownerships…</MudText>
                                        }

                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudSelect T="string"
                                                   Label="Services Offered"
                                                   Placeholder="Services Offered"
                                                   Typo="Typo.subtitle2"
                                                   Variant="Variant.Text"
                                                   FullWidth="true"
                                                   Margin="Margin.Dense"
                                                   @bind-Value="@_vendorReg.VendorType"
                                                   MultiSelection="true"
                                                   @bind-SelectedValues="@_selectedServices"
                                                   Required="true"
                                                   RequiredError="Please Select the Services Offered"
                                                   Disabled="@_isReadOnly">
                                            @foreach (var vType in _vendorServices)
                                            {
                                                <MudSelectItem Value="@(vType.VendorServiceName)">
                                                    @vType.VendorServiceName
                                                </MudSelectItem>
                                            }

                                        </MudSelect>
                                    </MudItem>
                                    <MudItem xs="12">

                                        <MudTextField T="string"
                                                      Label="Company Phone"
                                                      Placeholder="Phone Number"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      InputType="InputType.Telephone"
                                                      Format="(##) #####-#####"
                                                      @bind-Value="@_vendorReg.CompanyPhoneNo"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.CompanyPhoneNo)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Company Email"
                                                      Placeholder="Email Id"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      InputType="InputType.Email"
                                                      @bind-Value="@_vendorReg.CompanyEmailID"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.CompanyEmailID)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">


                                        <MudTextField Label="Company Website"
                                                      Placeholder="Website"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.WebSite"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.WebSite)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                        <!-- Address Details -->
                        <MudItem md="4" Class="h-150">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudGrid Spacing="0" GutterSize="1" AlignItems="center">
                                    <MudText Typo="Typo.h6" Color="Color.Info">Address Details</MudText>
                                    <MudDivider Class="mx-2" />
                                    <MudItem xs="12">
                                        <MudTextField Label="Address Line 1"
                                                      Placeholder="Steet"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegAddress1"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegAddress1)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Address Line 2"
                                                      Placeholder="Area"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegAddress2"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegAddress2)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Address Line 3"
                                                      Placeholder="Locality/Landmark"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegAddress3"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegAddress3)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="6" class="pe-1">
                                        <MudTextField Label="City"
                                                      Placeholder="City/Town"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegCity"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegCity)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField Label="PIN Code"
                                                      Placeholder="Postal Code"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegPIN"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegPIN)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="6" class="pe-1">
                                        <MudTextField Label="State"
                                                      Placeholder="State"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegState"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegState)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField Label="Country"
                                                      Placeholder="Country"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.RegCountry"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.RegCountry)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                        <!-- Responder Information -->
                        <MudItem md="4" Class="h-150">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudGrid Spacing="0" GutterSize="1" AlignItems="center">
                                    <MudText Typo="Typo.h6" Color="Color.Info">Responder's Information</MudText>
                                    <MudDivider Class="mx-2" />
                                    <MudItem xs="12">
                                        <MudTextField Label="First Name"
                                                      Placeholder="First Name"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.ResponderFName"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.ResponderFName)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Last Name"
                                                      Placeholder="Last Name"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.ResponderLName"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.ResponderLName)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Designation"
                                                      Placeholder="Responders Designation"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      @bind-Value="@_vendorReg.ResponderDesignation"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.ResponderDesignation)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Mobile"
                                                      Placeholder="Responders Mobile Number"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      InputType="InputType.Telephone"
                                                      Format="(##) #####-#####"
                                                      @bind-Value="@_vendorReg.ResponderMobileNo"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.ResponderMobileNo)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Email"
                                                      Placeholder="Responders Email ID"
                                                      Typo="Typo.subtitle2"
                                                      Variant="Variant.Text"
                                                      FullWidth="true"
                                                      Margin="Margin.Dense"
                                                      InputType="InputType.Email"
                                                      @bind-Value="@_vendorReg.ResponderEmailId"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.ResponderEmailId)"
                                                      Disabled="@_isReadOnly" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                    </MudGrid>
                </MudStep>


                <MudStep Title="Registration Details" Label="Step 2" Icon="@Icons.Material.Filled.Filter2"  >
                    <MudGrid GutterSize="1" Spacing="1">
                        <MudItem md="4">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudText Typo="Typo.h6" Color="Color.Info">Registration Details</MudText>
                                <MudDivider Class="mx-2" />
                                <MudGrid GutterSize="1" AlignItems="Center" Spacing="1">

                                    <!-- PAN field (takes most of the width) -->
                                    <MudItem xs="9" md="8" Style="padding-right:4px;">

                                        <MudTextField @bind-Value="_vendorReg.PANNo"
                                                      Placeholder="PAN Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="PAN No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isPANrequired"
                                                      FullWidth="true" />
                                    </MudItem>

                                    <!-- Uploader (aligned to the right of the PAN field) -->
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="PAN" OnChange="OnPANUploaded" />
                                    </MudItem>

                                    <!-- TAN -->
                                    <MudItem xs="9" md="8" Style="padding-right:4px ;">
                                        <MudTextField @bind-Value="_vendorReg.TANNo"
                                                      Placeholder="TAN Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="TAN No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isTANRrequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="TAN" OnChange="OnTANUploaded" />
                                    </MudItem>

                                    <!-- GST -->
                                    <MudItem xs="9" md="8" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.GSTNO"
                                                      Placeholder="GST Registration Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="GST No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isGSTRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="GST" OnChange="OnGSTUploaded" />
                                    </MudItem>

                                    <!-- CIN -->
                                    <MudItem xs="9" md="8" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.CIN"
                                                      Placeholder="CIN Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="CIN"
                                                      Margin="Margin.Dense"
                                                      Required="@_isCINRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="CIN" OnChange="onCINUploaded" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                        <!-- Column for AADHAR / UDYAM / PF / ESI with uploader on the right of each field -->
                        <MudItem md="4">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudText Typo="Typo.h6" Color="Color.Info">Registration Details</MudText>
                                <MudDivider Class="mx-2" />
                                <MudGrid GutterSize="1" AlignItems="Center" Spacing="1">

                                    <MudItem xs="9" md="8" Style="padding-right:4px;">


                                        <MudTextField @bind-Value="_vendorReg.AadharNo"
                                                      Placeholder="AADHAR Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="Aadhar No"
                                                      Margin="Margin.Dense"
                                                      Required="@_IsAadharRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="AADHAR" OnChange="OnAADHARUploaded" />
                                    </MudItem>
                                    <MudItem xs="12" md="12" Style="padding-right:4px;">
                                        <MudSwitch @bind-Value="_vendorReg.IsMSMERegistered" Color="Color.Primary">
                                            <MudText Typo="Typo.subtitle2">Is MSME Registered?</MudText>
                                        </MudSwitch>
                                    </MudItem>
                                    <MudItem xs="9" md="8" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.UDYAMRegNo"
                                                      Placeholder="UDYAM Registration Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="UDYAM No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isUDYAMRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="UDYAM" OnChange="OnUDYAMUploaded" />
                                    </MudItem>

                                    <MudItem xs="9" md="8" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.PFNo"
                                                      Placeholder="PF Registration Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="PF Reg No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isPFRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="PF" OnChange="OnPFUploaded" />
                                    </MudItem>

                                    <MudItem xs="9" md="8" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.ESIRegNo"
                                                      Placeholder="ESI Registration Number"
                                                      Typo="Typo.subtitle2"
                                                      Label="ESI Reg No"
                                                      Margin="Margin.Dense"
                                                      Required="@_isESIRequired"
                                                      FullWidth="true" />
                                    </MudItem>
                                    <MudItem xs="3" md="4" Style="display:flex; align-items:center; justify-content:center; padding-left:0;">
                                        <OrgRegisterDocsUploader DocType="ESI" OnChange="OnESIUploaded" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                        <MudItem md="4">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudText Typo="Typo.h6" Color="Color.Info">Bank Account Details</MudText>
                                <MudDivider Class="mx-2" />

                                <MudGrid GutterSize="1" AlignItems="Center" Spacing="1">
                                    <MudItem xs="12" md="12" Style="padding-right:4px;">
                                        <MudTextField @bind-Value="_vendorReg.BankName"
                                                      Placeholder="Name of the Bank"
                                                      Typo="Typo.subtitle2"
                                                      Label="Bank Name"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.BankName)"
                                                      Style="flex:1;" />
                                        <MudTextField @bind-Value="_vendorReg.BankBranch"
                                                      Placeholder="Name of the Bank Branch"
                                                      Typo="Typo.subtitle2"
                                                      Label="Bank Branch"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.BankBranch)"
                                                      Style="flex:1;" />
                                        <MudTextField @bind-Value="_vendorReg.IFSCCode"
                                                      Placeholder="IFSC Code"
                                                      Typo="Typo.subtitle2"
                                                      Label="IFSC Code"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.IFSCCode)"
                                                      Style="flex:1;" />
                                        <MudTextField @bind-Value="_vendorReg.AccountNumber"
                                                      Label="Account Number"
                                                      Placeholder="Account Number"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.AccountNumber)"
                                                      Style="flex:1;" />
                                        <MudTextField @bind-Value="_vendorReg.AccountName"
                                                      Label="Account Name"
                                                      Placeholder="Name of the Account Holder/Organizaton"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.AccountName)"
                                                      Style="flex:1;" />
                                        <MudText Typo="Typo.caption" Color="Color.Primary" Style="flex:1;">Upload a Cancelled Cheq/Bank Statement </MudText>
                                        <OrgRegisterDocsUploader DocType="CANCELCHEQ" OnChange="OnCancelCheqUploaded" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>

                    </MudGrid>
                </MudStep>


                <MudStep Title="Project Reference" Label="Step 3" Icon="@Icons.Material.Filled.Filter3"  >
                    <MudGrid GutterSize="1" AlignItems="Center" Spacing="1" Class="mb-2">
                        <MudItem xs="6">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">
                                <MudText Typo="Typo.h6" Color="Color.Info">Project 1 </MudText>
                                <MudDivider Class="mx-2" />
                                <MudGrid GutterSize="1" AlignItems="Center" Spacing="1">
                                    <MudItem xs="12">
                                        <MudTextField @bind-Value="_vendorReg.Experience1Customer"
                                                      Label="Customer Name"
                                                      Placeholder="Name of the Customeer"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1Customer)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience1Project"
                                                      Label="Project Name"
                                                      Placeholder="Name of the Project"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1Project)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience1City"
                                                      Label="City"
                                                      Placeholder="City where the Projet was done"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1City)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience1ProjectCost"
                                                      Label="Project Cost"
                                                      Placeholder="Approximate Cost"
                                                      Typo="Typo.subtitle2"
                                                      InputType="InputType.Number"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1ProjectCost)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudSelect @bind-Value="_vendorReg.Experience1ProjectStatus"
                                                   Label="Project Status"
                                                   Placeholder="Current Status of Project"
                                                   Typo="Typo.subtitle2"
                                                   Margin="Margin.Dense"
                                                   Disabled="@_isReadOnly"
                                                   Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1ProjectStatus)"
                                                   Style="flex:1;">
                                            <MudSelectItem Value="@("Completed")">Completed</MudSelectItem>
                                            <MudSelectItem Value="@("In Progress")">In Progress</MudSelectItem>
                                            <MudSelectItem Value="@("Cancelled")">Not Started</MudSelectItem>
                                            <MudSelectItem Value="@("Not Started")">Not Started</MudSelectItem>
                                        </MudSelect>
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudDatePicker @bind-date="_vendorReg.Experience1ProjectStartDt"
                                                       Label="Project Start Date"
                                                       Margin="Margin.Dense"
                                                       Disabled="@_isReadOnly"
                                                       Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1ProjectStartDt)"
                                                       Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudDatePicker @bind-date="_vendorReg.Experience1ProjectEndDt"
                                                       Label="Project End Date"
                                                       Margin="Margin.Dense"
                                                       Disabled="@_isReadOnly"
                                                       Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience1ProjectEndDt)"
                                                       Style="flex:1;" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Height="100%" Elevation="1" Class="pa-2 h-150" Style="border:1px solid var(--mud-palette-lines-default); border-radius:6px;">

                                <MudText Typo="Typo.h6" Color="Color.Info">Project 2 </MudText>
                                <MudDivider Class="mx-2" />
                                <MudGrid GutterSize="1" AlignItems="Center" Spacing="1">
                                    <MudItem xs="12">
                                        <MudTextField @bind-Value="_vendorReg.Experience2Customer"
                                                      Label="Customer Name"
                                                      Placeholder="Name of the Customeer"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2Customer)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience2Project"
                                                      Label="Project Name"
                                                      Placeholder="Name of the Project"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2Project)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience2City"
                                                      Label="City"
                                                      Placeholder="City where the Projet was done"
                                                      Typo="Typo.subtitle2"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2City)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudTextField @bind-Value="_vendorReg.Experience2ProjectCost"
                                                      Label="Project Cost"
                                                      Placeholder="Approximate Cost"
                                                      Typo="Typo.subtitle2"
                                                      InputType="InputType.Number"
                                                      Margin="Margin.Dense"
                                                      Disabled="@_isReadOnly"
                                                      Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2ProjectCost)"
                                                      Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudSelect @bind-Value="_vendorReg.Experience2ProjectStatus"
                                                   Label="Project Status"
                                                   Placeholder="Current Status of Project"
                                                   Typo="Typo.subtitle2"
                                                   Margin="Margin.Dense"
                                                   Disabled="@_isReadOnly"
                                                   Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2ProjectStatus)"
                                                   Style="flex:1;">
                                            <MudSelectItem Value="@("Completed")">Completed</MudSelectItem>
                                            <MudSelectItem Value="@("In Progress")">In Progress</MudSelectItem>
                                            <MudSelectItem Value="@("Cancelled")">Not Started</MudSelectItem>
                                            <MudSelectItem Value="@("Not Started")">Not Started</MudSelectItem>
                                        </MudSelect>
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudDatePicker @bind-date="_vendorReg.Experience2ProjectStartDt"
                                                       Label="Project Start Date"
                                                       Margin="Margin.Dense"
                                                       Disabled="@_isReadOnly"
                                                       Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2ProjectStartDt)"
                                                       Style="flex:1;" />
                                    </MudItem>
                                    <MudItem xs="6">
                                        <MudDatePicker @bind-date="_vendorReg.Experience2ProjectEndDt"
                                                       Label="Project End Date"
                                                       Margin="Margin.Dense"
                                                       Disabled="@_isReadOnly"
                                                       Required="@ValidationExtensions.HasRequiredAttribute(() => _vendorReg.Experience2ProjectEndDt)"
                                                       Style="flex:1;" />
                                    </MudItem>
                                </MudGrid>
                            </MudPaper>
                        </MudItem>
                    </MudGrid>



                </MudStep>

                <MudStep Title="Approvals" Label="Step 4" Icon="@Icons.Material.Filled.Filter4" >

                    <MudGrid GutterSize="1" AlignItems="Center">
                        <MudItem xs="6" md="6">
                            <MudText Typo="Typo.h6" Color="Color.Info">Reviewer Status</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Reviewed By</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.Reviewer</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Reviewed On</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ReviewDate</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Review Status</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ReviewStatus</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Review Comments</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ReviewComments</MudText>

                        </MudItem>
                        <MudItem xs="6" md="6">
                            <MudText Typo="Typo.h6" Color="Color.Info">Approval Status</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Approved By</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.Approver</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Approved On</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ApprovalDate    </MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Approval Status</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ApprovalStatus</MudText>
                            <MudDivider Class="mx-2" />
                            <MudText Typo="Typo.body2">Approver Comments</MudText>
                            <MudText Typo="Typo.h6">@_vendorReg.ApprovalComments</MudText>

                        </MudItem>
                    </MudGrid>

                </MudStep>


            </MudStepper>

            <MudDivider Class="my-2" />
            <div class="d-flex justify-end mt-2">
                <MudButton Variant="Variant.Outlined"
                           Color="Color.Default"
                           OnClick="OnCancel"
                           Disabled="@_isSaving"
                           Class="me-2">
                    Cancel
                </MudButton>

                <!-- Submit as form submit so EditForm runs HandleSubmit -->
                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled"
                           Color="Color.Primary"
                           Disabled="@_isSaving">
                    @if (_isSaving)
                    {
                        <MudProgressCircular Size="Size.Medium" Class="me-2" Indeterminate="true" />
                        <span>Saving…</span>
                    }
                    else
                    {
                        <span>Submit</span>
                    }
                </MudButton>
            </div>
        </EditForm>
    </MudCardContent>
</MudCard>

@code {
    private List<BreadcrumbItem> _items = new()
    {
        new BreadcrumbItem("Home", href: "/", disabled: false),
        new BreadcrumbItem("Registration List", href: "/vendor-registrations", disabled: false),
    };
}
