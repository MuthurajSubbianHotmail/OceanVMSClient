/* Polished InvoiceList styles — focused on ChildRowContent layout, spacing and action buttons */

/* --- Variables --- */
:root{
  --iv-bg: #ffffff;
  --iv-surface: #fbfdff;
  --iv-muted: #6b7280;
  --iv-accent: #1b6ec2;
  --iv-shadow: rgba(16,24,40,0.06);
  --iv-radius: 8px;
  --iv-gap: 10px;
}

/* --- Base invoice card / table --- */
.invoice-paper {
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(249,250,252,0.98));
  border-radius: 10px;
  box-shadow: 0 6px 18px var(--iv-shadow);
  padding: 1rem;
}

/* --- App bar / title alignment fixes --- */
/* Ensure the avatar and title text sit on the same baseline and center vertically */
.po-appbar .title {
  display: flex;
  align-items: center;         /* vertical center alignment */
  gap: 12px;                   /* space between avatar and text */
  min-height: 48px;
}

/* Keep the text column vertically centered regardless of MudText margins */
.po-appbar .title > div {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* --- Child row container --- */
.child-row-paper {
  background: linear-gradient(180deg, var(--iv-bg), var(--iv-surface));
  border-radius: calc(var(--iv-radius) - 2px);
  padding: 10px;
  border: 1px solid rgba(15,23,42,0.03);
  box-shadow: 0 1px 4px rgba(16,24,40,0.03);
  margin: 0.25rem 0;
}

/* Keep internal MudGrid gutters tighter */
.child-row-paper :where(.mud-grid, .mud-item) {
  gap: 6px;
}

/* --- Left small info cards (Project / PO / Remarks) --- */
.small-card {
  padding: 10px;
  border-radius: 8px;
  background: linear-gradient(180deg, #fff, var(--iv-surface));
  box-shadow: 0 1px 3px rgba(16,24,40,0.04);
  height: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
}

.small-card .label {
  font-size: 0.75rem;
  color: var(--iv-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.small-card .value {
  font-weight: 600;
  font-size: 1rem;
  color: #0f172a;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.small-card .subtext {
  font-size: 0.82rem;
  color: var(--iv-muted);
}

/* Make small cards equal height so top row lines up */
.card-equal { min-height: 72px; }

/* --- KPI cards row (second row) --- */
.kpi-cards {
  display: flex;
  gap: 10px;
  align-items: center;
  /* Allow wrapping to avoid horizontal scrollbar */
  flex-wrap: wrap;
  overflow-x: visible;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 4px;
}

.kpi-card.compact {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 8px 10px;
  border-radius: 8px;
  background: linear-gradient(180deg,#fff,#fbfdff);
  box-shadow: 0 1px 4px rgba(16,24,40,0.04);
  min-width: 140px;
  box-sizing: border-box;
  flex: 0 1 auto;
  height: 100%;
}

.kpi-card.compact .kpi-left {
  min-width: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.kpi-card.compact .kpi-body .label {
  font-size: 0.78rem;
  color: var(--iv-muted);
}

.kpi-card.compact .kpi-body .value {
  font-weight: 700;
  font-size: 0.98rem;
  color: #0f172a;
}

/* Ensure KPI scrollbar is subtle (if any) */
.kpi-cards::-webkit-scrollbar { height: 6px; }
.kpi-cards::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.08); border-radius: 6px; }

/* --- Actions group (right side of second row) --- */
.action-wrapper {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: flex-end;
  flex-wrap: wrap;
  min-width: 160px;
}

/* Button baseline for child-row actions */
.invoice-action-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 0 12px;
  height: 40px;
  border-radius: 6px;
  text-transform: none;
  transition: transform .08s ease, box-shadow .12s ease;
  box-sizing: border-box;
}

/* Primary Download button has stronger visual weight */
.invoice-action-btn.download {
  background: var(--iv-accent);
  color: #fff;
  border: none;
}

.invoice-action-btn.download:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(27,110,194,0.12); }

/* Secondary Open button */
.invoice-action-btn.open {
  background: transparent;
  border: 1px solid rgba(15,23,42,0.06);
  color: #0f172a;
}

/* Full width variant for stacking on small screens */
.invoice-action-btn.full-width { width: 100%; justify-content: center; }

/* Fixed width for both buttons so they match visually (same width) */
.fixed-width {
  min-width: 140px;
  max-width: 140px;
  width: 140px;
  box-sizing: border-box;
}

/* Disabled state */
.invoice-action-btn[disabled] { opacity: 0.6; pointer-events: none; transform: none; box-shadow: none; }

/* --- Child-row actions: vertical alignment helper --- */
/* Add a modifier class to stack buttons vertically while keeping right alignment */
.child-row-actions-right {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: flex-end;
}

/* When `vertical` modifier is present, stack the buttons vertically and keep same width */
.child-row-actions-right.vertical {
  flex-direction: column;
  align-items: flex-end; /* keep the right edge aligned with the row */
  gap: 8px;
}

/* Ensure buttons keep their fixed width when stacked */
.child-row-actions-right.vertical .invoice-action-btn.fixed-width {
  width: 140px;
}

/* Ensure MudButton content centers and doesn't stretch layout */
.child-row-paper .invoice-action-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* --- Responsive behavior --- */
@media (max-width: 960px) {
  .kpi-card.compact { min-width: 120px; padding: 6px 8px; }
  .action-wrapper { min-width: 120px; justify-content: flex-end; }
  .small-card .value { white-space: normal; } /* allow wrapping on narrow screens */
}

@media (max-width: 720px) {
  /* Stack KPI and actions vertically for narrow screens */
  .child-row-bottom {
    flex-direction: column;
    align-items: stretch;
  }

  .child-row-bottom .left { order: 1; }
  .child-row-bottom .right { order: 2; display: flex; }

  .action-wrapper { justify-content: center; }

  /* Make buttons full width when stacked on very small screens */
  .invoice-action-btn.full-width { width: 100%; }
  .invoice-action-btn { min-width: 0; flex: 1 1 auto; }
}

/* --- Minor table / header refinements kept for consistency --- */
:deep(.po-table thead th),
:deep(.mud-table thead th) {
  background: linear-gradient(90deg, rgba(100,149,237,0.95), rgba(65,105,225,0.95)) !important;
  color: #fff !important;
  border-bottom: 1px solid rgba(0,0,0,0.06) !important;
}

/* smaller utility tweaks */
.ms-2 { margin-left: 0.5rem; }
.no-wrap { white-space: nowrap; }

/* --- Fix: prevent filter controls from stretching full-width --- */
/* Make filters wrap instead of forcing a single horizontal line that scrolls */
.filters-row {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;            /* allow wrapping to multiple lines to avoid horizontal scroll */
  overflow-x: visible;        /* avoid forced horizontal scroll */
  -webkit-overflow-scrolling: touch;
}

/* Allow children to shrink if needed (prevents fixed full-bleed controls) */
.filters-row > * {
  flex: 0 1 auto !important;    /* allow items to shrink but not grow excessively */
  box-sizing: border-box;
}

/* Per-control sizing — prevents full-bleed inputs while remaining responsive */
.filter-wrap {
  min-width: 100px !important;
  max-width: 160px !important;  /* adjust as needed for longer controls */
  width: auto !important;
  flex: 0 1 auto !important;
}

/* Keep the input inside the wrapper full width of the wrapper (not the page) */
.filter-control {
  width: 100%;
  max-width: 100%;
  display: block;
  box-sizing: border-box;
}

/* Date picker slightly wider but constrained */
.filter-wrap .mud-date-range-picker,
.filter-wrap .mud-text-field,
.filter-wrap .mud-numeric-field {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Small-screen behaviour: allow controls to shrink and stay usable */
@media (max-width: 720px) {
  .filters-row {
    gap: 8px;
  }

  /* on very small screens let items be a bit narrower but still not full page */
  .filter-wrap {
    min-width: 100px !important;
    max-width: 220px !important;
  }
}

/* Optional: if you need a single control to be wider (e.g. Vendor), add a helper class:
   <div class="filter-wrap filter-wide"> ... </div>
*/
.filter-wrap.filter-wide {
  min-width: 180px !important;
  max-width: 380px !important;
}

/* keep icon vertically centered and prevent it from pushing content */
.action-inline { display:flex; align-items:center; margin-left:8px; }

/* allow remarks text to wrap on narrow screens without overflow */
.small-card .value { white-space: normal; }